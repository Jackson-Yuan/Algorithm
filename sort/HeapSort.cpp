#include "iostream"
#include "vector"
#include "algorithm"

using namespace std;

/**
 * ��������ȫ����������ʽ��֯����
 *
 * ��ʼ�����ݣ���Ҫ�����һ����Ҷ�ӽڵ㿪ʼ������
 * ��ȫ�������У����һ����Ҷ�ӽڵ������������1��ʼ��Ϊ��len / 2��lenΪ������ȫ�����������鳤��
 * ��������0��ʼ���ͼ�һ���ɣ����������һ����Ҷ�ӽڵ㿪ʼ�𽥴������϶�ÿ����Ҷ�ڵ�����������С���ѵ��жϼ�����
 *
 * ��ʼ����ɺ󣬶Ѷ�������������Ϊ0��λ�ã�Ԫ�ؼ�Ϊ��ʼֵ�����С��ֵ
 * �԰���С��������Ϊ�����������ѣ���
 * ���Ѷ���Ԫ�أ�����������β������β���������ڶѶ���һ���������ѵ�����
 * ��Ҫ�����жϼ�������ֻҪ��һ�����ɣ���Ϊ����Ԫ�ض���������Ҫ��
 * ����ԭ�����Ԫ���Էŵ�����β�������¹�������ʱ�����ܴ�����
 *
 * ѭ������ֱ������ʣ��0��Ԫ��
 * */
void adjustHeap(int arr[], int target, int len) {
    for (int i = 2 * target + 1; i < len; i = 2 * i + 1) {
        if (i + 1 < len && arr[i] < arr[i + 1]) {
            ++i;
        }

        if (arr[i] > arr[target]) {
            swap(arr[i], arr[target]);

            target = i;
        } else break;
    }
}

int main() {
    int arr[] = {4, 3, 5, 2, 1, 9, 10, 6, 8, 7};

    for (int i = 10 / 2 - 1; i >= 0; --i) {
        adjustHeap(arr, i, 10);
    }

    for (int i = 9; i >= 0; --i) {
        swap(arr[0], arr[i]);
        adjustHeap(arr, 0, i);
    }

    for (int i = 0; i < 10; ++i) {
        cout << arr[i] << " ";
    }
}

